<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Chloe">

    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.css" rel="stylesheet">

    <!-- Add custom CSS here -->
    <link href="../static/css/simple-sidebar.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet">

    <script src="{{ url_for('static', path='../static/js/p5.min.js')}}"></script>
    <script src="{{ url_for('static', path='../static/js/p5.dom.min.js')}}"></script>
    <script src="{{ url_for('static', path='../static/js/p5.sound.min.js')}}"></script>
    <!-- <link rel="stylesheet" type="text/css" href="{{ url_for('static', path='css/style.css')}}"> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>

  </head>

  <body>
  
    <div id="wrapper">
      
      <!-- Sidebar -->
      <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
          <li class="sidebar-brand"><a href="#">Menu</a></li>
          <li><a href="../index.html">Main</a></li>
          <li><a href="Contact.html">Contact</a></li>
        </ul>
      </div>
          
      <!-- Page content -->
      <div id="page-content-wrapper">
        <div class="content-header">
          <h1>
            <a id="menu-toggle" href="#" class="btn btn-default"><i class="icon-reorder"></i></a>
            Disaster Resource Allocation
          </h1>
        </div>
        <!-- Keep all page content within the page-content inset div! -->
        <div class="page-content inset">
          <div class="row">
            <table id="tabgame" v-if="position" cellpadding="10" cellspacing="0" style="width: 1150px;" align="center">
              <div id="qualtrics-container">
                  <!-- <iframe id="frame-qualtrics" height="400px" width="400px">
                  </iframe> -->
              </div>
              <tr id="game-container" class=border align="center">
                  <td>
                      <div style = "text-align: center">
                          <h2 id="playtime"> Disaster Day: <span id="day"></span> minutes</h2>
                          <h3>
                            <span id="episode"></span> |
                            <span id="goal">Points: 0</span> |
                            <span id="food">Food: 0</span> |
                            <span id="drink">Drink: 0</span> |
                            <span id="staff">Staff: 0</span> |
                            <span id="death">Death: 0</span> |
                            <span id="injured">Injured: 0</span> |
                            
                            <span id="instructionsToggle" style="border-color: gray; border-width: 2px; padding: 6px; border-style: solid;cursor:pointer;">Show commands</span>
                        </h3>
                      </div>
                      <div align="center">
                          
                          <h3><span id="result"></span></h3>
                          <form name="frm">
                              <input type="hidden" id="uid" name="uid" value={{data}} />
                              <input type="hidden" id="session" name="session" value={{session}} />
                              <input type="hidden" id="group" name="group" value={{group}} />
                          </form>
                      </div>
                      
                      <form id="minimap" action="/fullmap/" method="POST">
                          <input type="hidden" id="uid" name="uid" value={{data}} />
                          <input type="hidden" id="session" name="session" value={{session}} />
                          <input type="hidden" id="group" name="group" value={{group}} />


                          <script>
                              $('#next-button').click(function() {
                                  var id = $('#uid').val();
                                  var sessionId = Number($('#session').val())+1;
                                  $('#session').val(sessionId);
                                  var formAction = $('#next-button').attr('formaction');
                                  $('#next-button').attr('formaction', formAction + '?uid=' + id);
                              });
                              $( "#finish-button").click(function() {
                                  var id = $('#uid').val();
                                  var formAction = $('#finish-button').attr('formaction');
                                  $('#finish-button').attr('formaction', formAction);
                              }); 
                          </script>
                      </form>
                  </td>
              </tr>
            </table>

            <div id="ready-room" class="text-center">
              <div id="not_ready" align = "center">
                  <p>When you are ready to start, please click the "Ready" button. </p> 
                  <script type="module" src="../static/js/env.js"></script>
                  <script type="module" src="../static/js/objects.js"></script>
                  <script>
                    const userRole = "Shelter";
                  </script>
                  <button id="startButton">Start Game</button>
        
              </div>

              <div id="userInputs" class="hidden">        
                <input type="number" class="userInput" data-input="request-food" placeholder="Request food amount...">
                <input type="number" class="userInput" data-input="request-drink" placeholder="Request drink amount...">
                <input type="number" class="userInput" data-input="request-staff" placeholder="Request staff amount...">
                <button id="nextButton">Next</button>
              </div>
            </div>

            
            
          </div>
        </div>
      </div>
      
    </div>
	
    <!-- JavaScript -->
    <script src="js/jquery-1.10.2.js"></script>
    <!-- <script src="js/bootstrap.js"></script> -->

    

    <!-- Custom JavaScript for the Menu Toggle -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("active");
    });
    </script>
  </body>
</html>
